import{c as d,__tla as o}from"./astro-component.CXlaF79K.js";import{r,m as E,u as v,__tla as m}from"./constant.BJJ7tkf7.js";import{__tla as y}from"./astro/assets-service.DQopRnBr.js";let a,l,n,e,p,c,i,u=Promise.all([(()=>{try{return o}catch{}})(),(()=>{try{return m}catch{}})(),(()=>{try{return y}catch{}})()]).then(async()=>{let s;s=`<h2 id="1-overview">1. Overview</h2>
<p>This document defines the structure and building method of Higress Wasm Plugin images. When preparing, we referred to <a href="https://github.com/solo-io/wasm/blob/master/spec/spec-compat.md" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">Wasm Image Specification</a>.</p>
<h2 id="2-image-structure">2. Image Structure</h2>
<p>Each image needs to be build in <a href="https://github.com/opencontainers/image-spec" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">OCI Image Specification</a> based on <code dir="auto">scratch</code>, and shall only contain following files:</p>
<ul>
<li>spec.yaml: Required. Metadata file of the plugin. Please refer to section 3 below for its format.</li>
<li>README.md: Required. Readme file describing the usage of the plugin. Markdown format. Written in English or Chinese.</li>
<li>README_{lang}.md: Optional. Readme file describing the usage of the plugin. Markdown format. <code dir="auto">lang</code> can be <code dir="auto">ZH</code> or <code dir="auto">EN</code>.</li>
<li>icon.png: Optional. Icon file of the plugin. A URL of the plugin icon can also be specified in spec.yaml. If both the file and the URL are configured, the file will be used for display.</li>
<li>plugin.wasm: Required. The binary file of the plugin.</li>
</ul>
<p>Each layer of the image can only contain a single file.</p>
<p>Except the layer containing plugin.wasm, the media type of other layers shall be set according to the file inside:</p>
<ul>
<li>spec.yaml: application/vnd.module.wasm.spec.v1+yaml</li>
<li>README.md: application/vnd.module.wasm.doc.v1+markdown</li>
<li>README_{lang}.md: application/vnd.module.wasm.doc.v1.{lang}+markdown</li>
<li>icon.png: application/vnd.module.wasm.icon.v1+png</li>
</ul>
<p>plugin.wasm must be placed in the last layer of the image, with the media type of application/vnd.oci.image.layer.v1.tar+gzip.</p>
<h2 id="3-metadata-file-format">3. Metadata File Format</h2>
<p>The format of metadata file, <code dir="auto">spec.yaml</code>, is as following, using the metadata of <code dir="auto">basic-auth</code> plugin as an example:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.1vui4.css"><script type="module" src="/_astro/ec.dy9ns.js"><\/script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">apiVersion</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">1.0.0</span><span style="--0:#E1E4E8">  </span><span style="--0:#99A0A6"># The schema version of the content below. Always use to 1.0.0 for now.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">info</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">category</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">auth</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Plugin category. Options: auth (authentication and authorization), security (security protection), protocol (protocol transformation), flow-control, flow-monitor,custom</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">basic-auth/v1</span><span style="--0:#E1E4E8">  </span><span style="--0:#99A0A6"># Plugin name, which is the unique identifier of the plugin. It is recommended to add a version suffix, such as "/v1", just in case an incompatible upgrade in the future.</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Basic Auth</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Display name. I18n supported.</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">description</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u672C\u63D2\u4EF6\u5B9E\u73B0\u4E86\u57FA\u4E8E HTTP Basic Auth \u6807\u51C6\u8FDB\u884C\u8BA4\u8BC1\u9274\u6743\u7684\u529F\u80FD\u3002</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Plugin description. I18n supported.</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">x-description-i18n</span><span style="--0:#E1E4E8">: </span><span style="--0:#99A0A6"># I18n content of the description field above. Translated contents can be added using "x-{name}-i18n" fields for all i18n-supported fields.</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">This plugin implements an authentication function based on HTTP Basic Auth standard.</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">iconUrl</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">https://img.alicdn.com/imgextra/i1/O1CN01I7WjVs1K33EQjInid_!!6000000001107-2-tps-960-290.png</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Optional. URL of plugin icon file.</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">version</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">1.0.0</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Plugin version</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">contact</span><span style="--0:#E1E4E8">: </span><span style="--0:#99A0A6"># Plugin contact</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Higress Team</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">url</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">http://higress.io/</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">email</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">admin@higress.io</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">spec</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">phase</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">AUTHN</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Execution phase. Please refer to https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#PluginPhase</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">priority</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">0</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Execution priority within the given phase. Please refer to https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#WasmPlugin</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">configSchema</span><span style="--0:#E1E4E8">: </span><span style="--0:#99A0A6"># Schema of the plugin's runtime configurations, which shall be defined with the Schema object in OpenAPI 3.0.0 standard.</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">openAPIV3Schema</span><span style="--0:#E1E4E8">: </span><span style="--0:#99A0A6"># Please refer to https://openapi.apifox.cn/#schema-%E5%AF%B9%E8%B1%A1 for the data structure. Some fields which can be used for display support i18n.</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">object</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">properties</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85E89D">consumers</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">array</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">x-scope</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">GLOBAL</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Field effective scope. Options: GLOBAL (global configuration), RULE (rule-level configuration, which can be set associated to routes, domains or services.), ANY (Effective scope unrestricted). Optional. Default value is ANY.</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u8C03\u7528\u65B9\u5217\u8868</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">x-title-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Consumer List</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">description</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u670D\u52A1\u8C03\u7528\u65B9\u5217\u8868\uFF0C\u7528\u4E8E\u5BF9\u8BF7\u6C42\u8FDB\u884C\u8BA4\u8BC1</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">x-description-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">List of service consumers which will be used in request authentication</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">items</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">object</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">properties</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">              </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">string</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u540D\u79F0</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">x-title-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                  </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Name</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">description</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u8BE5\u8C03\u7528\u65B9\u7684\u540D\u79F0</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">x-description-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                  </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">The name of the consumer</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># Data validation shall be implemented according JSON Schema Validation Spec</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># https://json-schema.org/draft/2020-12/json-schema-validation.html</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># Following values are supported:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - maximum</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - minimum</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - maxLength</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - minLength</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - pattern</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - maxItems</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - minItems</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#99A0A6"># - required</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">minLength</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">6</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Minimum length for data validation</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">maxLength</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">256</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Maximum length for data validation</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">pattern</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">"^$"</span><span style="--0:#E1E4E8"> </span><span style="--0:#99A0A6"># Regular experssion for data validation</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">example</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">                  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">consumer1</span></div></div><div class="ec-line"><div class="code"><span class="indent">              </span><span style="--0:#85E89D">credential</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">string</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u8BBF\u95EE\u51ED\u8BC1</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">x-title-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                  </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Credential</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">description</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u8BE5\u8C03\u7528\u65B9\u7684\u8BBF\u95EE\u51ED\u8BC1</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">x-description-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">                  </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">The credential of the consumer</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#85E89D">example</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">                  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">admin:123456</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">required</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">              </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">name</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">              </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">credential</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85E89D">allow</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">array</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u6388\u6743\u8BBF\u95EE\u7684\u8C03\u7528\u65B9\u5217\u8868</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">x-title-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Allowed Consumers</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">description</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">\u5BF9\u4E8E\u5339\u914D\u4E0A\u8FF0\u6761\u4EF6\u7684\u8BF7\u6C42\uFF0C\u5141\u8BB8\u8BBF\u95EE\u7684\u8C03\u7528\u65B9\u5217\u8868</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">x-description-i18n</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">en-US</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">Consumers to be allowed for matched requests</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#85E89D">items</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">string</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">example</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">              </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">consumer1</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">required</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">allow</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">consumers</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">example</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85E89D">consumers</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">          </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">consumer1</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">credential</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">admin:123456</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">          </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">consumer2</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#85E89D">credential</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">guest:abc</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85E89D">allow</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">          </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">consumer2</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="apiVersion: 1.0.0  # The schema version of the content below. Always use to 1.0.0 for now.\x7Finfo:\x7F  category: auth # Plugin category. Options: auth (authentication and authorization), security (security protection), protocol (protocol transformation), flow-control, flow-monitor,custom\x7F  name: basic-auth/v1  # Plugin name, which is the unique identifier of the plugin. It is recommended to add a version suffix, such as &#x22;/v1&#x22;, just in case an incompatible upgrade in the future.\x7F  title: Basic Auth # Display name. I18n supported.\x7F  description: \u672C\u63D2\u4EF6\u5B9E\u73B0\u4E86\u57FA\u4E8E HTTP Basic Auth \u6807\u51C6\u8FDB\u884C\u8BA4\u8BC1\u9274\u6743\u7684\u529F\u80FD\u3002 # Plugin description. I18n supported.\x7F  x-description-i18n: # I18n content of the description field above. Translated contents can be added using &#x22;x-{name}-i18n&#x22; fields for all i18n-supported fields.\x7F    en-US: This plugin implements an authentication function based on HTTP Basic Auth standard.\x7F  iconUrl: https://img.alicdn.com/imgextra/i1/O1CN01I7WjVs1K33EQjInid_!!6000000001107-2-tps-960-290.png # Optional. URL of plugin icon file.\x7F  version: 1.0.0 # Plugin version\x7F  contact: # Plugin contact\x7F    name: Higress Team\x7F    url: http://higress.io/\x7F    email: admin@higress.io\x7Fspec:\x7F  phase: AUTHN # Execution phase. Please refer to https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#PluginPhase\x7F  priority: 0 # Execution priority within the given phase. Please refer to https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#WasmPlugin\x7F  configSchema: # Schema of the plugin&#x27;s runtime configurations, which shall be defined with the Schema object in OpenAPI 3.0.0 standard.\x7F    openAPIV3Schema: # Please refer to https://openapi.apifox.cn/#schema-%E5%AF%B9%E8%B1%A1 for the data structure. Some fields which can be used for display support i18n.\x7F      type: object\x7F      properties:\x7F        consumers:\x7F          type: array\x7F          x-scope: GLOBAL # Field effective scope. Options: GLOBAL (global configuration), RULE (rule-level configuration, which can be set associated to routes, domains or services.), ANY (Effective scope unrestricted). Optional. Default value is ANY.\x7F          title: \u8C03\u7528\u65B9\u5217\u8868\x7F          x-title-i18n:\x7F            en-US: Consumer List\x7F          description: \u670D\u52A1\u8C03\u7528\u65B9\u5217\u8868\uFF0C\u7528\u4E8E\u5BF9\u8BF7\u6C42\u8FDB\u884C\u8BA4\u8BC1\x7F          x-description-i18n:\x7F            en-US: List of service consumers which will be used in request authentication\x7F          items:\x7F            type: object\x7F            properties:\x7F              name:\x7F                type: string\x7F                title: \u540D\u79F0\x7F                x-title-i18n:\x7F                  en-US: Name\x7F                description: \u8BE5\u8C03\u7528\u65B9\u7684\u540D\u79F0\x7F                x-description-i18n:\x7F                  en-US: The name of the consumer\x7F                # Data validation shall be implemented according JSON Schema Validation Spec\x7F                # https://json-schema.org/draft/2020-12/json-schema-validation.html\x7F                # Following values are supported:\x7F                # - maximum\x7F                # - minimum\x7F                # - maxLength\x7F                # - minLength\x7F                # - pattern\x7F                # - maxItems\x7F                # - minItems\x7F                # - required\x7F                minLength: 6 # Minimum length for data validation\x7F                maxLength: 256 # Maximum length for data validation\x7F                pattern: &#x22;^$&#x22; # Regular experssion for data validation\x7F                example:\x7F                  - consumer1\x7F              credential:\x7F                type: string\x7F                title: \u8BBF\u95EE\u51ED\u8BC1\x7F                x-title-i18n:\x7F                  en-US: Credential\x7F                description: \u8BE5\u8C03\u7528\u65B9\u7684\u8BBF\u95EE\u51ED\u8BC1\x7F                x-description-i18n:\x7F                  en-US: The credential of the consumer\x7F                example:\x7F                  - admin:123456\x7F            required:\x7F              - name\x7F              - credential\x7F        allow:\x7F          type: array\x7F          title: \u6388\u6743\u8BBF\u95EE\u7684\u8C03\u7528\u65B9\u5217\u8868\x7F          x-title-i18n:\x7F            en-US: Allowed Consumers\x7F          description: \u5BF9\u4E8E\u5339\u914D\u4E0A\u8FF0\u6761\u4EF6\u7684\u8BF7\u6C42\uFF0C\u5141\u8BB8\u8BBF\u95EE\u7684\u8C03\u7528\u65B9\u5217\u8868\x7F          x-description-i18n:\x7F            en-US: Consumers to be allowed for matched requests\x7F          items:\x7F            type: string\x7F            example:\x7F              - consumer1\x7F      required:\x7F        - allow\x7F        - consumers\x7F      example:\x7F        consumers:\x7F          - name: consumer1\x7F            credential: admin:123456\x7F          - name: consumer2\x7F            credential: guest:abc\x7F        allow:\x7F          - consumer2"><div></div></button></div></figure></div>
<h2 id="4-how-to-build-an-image">4. How to Build an Image</h2>
<ol>
<li>Start the builder container from the Higress root folder</li>
</ol>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">GO_VERSION</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"1.19"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">TINYGO_VERSION</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"0.28.1"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">ORAS_VERSION</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"1.0.0"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">PLUGIN_NAME</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"hello-world"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">BUILDER_IMAGE</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/wasm-go-builder:go\${</span><span style="--0:#E1E4E8">GO_VERSION</span><span style="--0:#9ECBFF">}-tinygo\${</span><span style="--0:#E1E4E8">TINYGO_VERSION</span><span style="--0:#9ECBFF">}-oras\${</span><span style="--0:#E1E4E8">ORAS_VERSION</span><span style="--0:#9ECBFF">}"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">docker</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">run</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-v</span><span style="--0:#E1E4E8"> \${PWD}</span><span style="--0:#9ECBFF">:/workspace</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-e</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">PLUGIN_NAME=</span><span style="--0:#E1E4E8">\${PLUGIN_NAME} </span><span style="--0:#79B8FF">-it</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">--rm</span><span style="--0:#E1E4E8">  </span><span style="--0:#9ECBFF">/bin/bash</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="GO_VERSION=&#x22;1.19&#x22;\x7FTINYGO_VERSION=&#x22;0.28.1&#x22;\x7FORAS_VERSION=&#x22;1.0.0&#x22;\x7FPLUGIN_NAME=&#x22;hello-world&#x22;\x7FBUILDER_IMAGE=&#x22;higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/wasm-go-builder:go\${GO_VERSION}-tinygo\${TINYGO_VERSION}-oras\${ORAS_VERSION}&#x22;\x7Fdocker run -v \${PWD}:/workspace -e PLUGIN_NAME=\${PLUGIN_NAME} -it --rm  /bin/bash"><div></div></button></div></figure></div>
<ol start="2">
<li>Build Wasm file inside the container</li>
</ol>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#79B8FF">cd</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">/workspace/plugins/wasm-go/extensions/</span><span style="--0:#E1E4E8">\${PLUGIN_NAME}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">go</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">mod</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">tidy</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">tinygo</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">build</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-o</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">./plugin.wasm</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-scheduler=none</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-target=wasi</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-gc=custom</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">-tags=</span><span style="--0:#9ECBFF">'custommalloc nottinygc_finalizer'</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">./main.go</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /workspace/plugins/wasm-go/extensions/\${PLUGIN_NAME}\x7Fgo mod tidy\x7Ftinygo build -o ./plugin.wasm -scheduler=none -target=wasi -gc=custom -tags=&#x27;custommalloc nottinygc_finalizer&#x27; ./main.go"><div></div></button></div></figure></div>
<ol start="3">
<li>Build and push an OCI image</li>
</ol>
<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre tabindex="0"><code><div class="ec-line"><div class="code"><span style="--0:#B392F0">tar</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">czvf</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">plugin.tar.gz</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">plugin.wasm</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">IMAGE_REGISTRY_SERVICE</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">docker.io</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">IMAGE_REPOSITORY</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"\${</span><span style="--0:#E1E4E8">IMAGE_REGISTRY_SERVICE</span><span style="--0:#9ECBFF">}/plugins/\${</span><span style="--0:#E1E4E8">PLUGIN_NAME</span><span style="--0:#9ECBFF">}"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">IMAGE_TAG</span><span style="--0:#F97583">=</span><span style="--0:#9ECBFF">"v0.0.1"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">oras</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">login</span><span style="--0:#E1E4E8"> \${IMAGE_REGISTRY_SERVICE}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#B392F0">oras</span><span style="--0:#E1E4E8"> </span><span style="--0:#9ECBFF">push</span><span style="--0:#E1E4E8"> \${IMAGE_REPOSITORY}</span><span style="--0:#9ECBFF">:</span><span style="--0:#E1E4E8">\${IMAGE_TAG} </span><span style="--0:#79B8FF">\\</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">./spec.yaml:application/vnd.module.wasm.spec.v1+yaml</span><span style="--0:#E1E4E8">  </span><span style="--0:#79B8FF">\\</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">./README.md:application/vnd.module.wasm.doc.v1+markdown</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">\\</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">./README_EN.md:application/vnd.module.wasm.doc.v1.en+markdown</span><span style="--0:#E1E4E8"> </span><span style="--0:#79B8FF">\\</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">./plugin.tar.gz:application/vnd.oci.image.layer.v1.tar+gzip</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="tar czvf plugin.tar.gz plugin.wasm\x7FIMAGE_REGISTRY_SERVICE=docker.io\x7FIMAGE_REPOSITORY=&#x22;\${IMAGE_REGISTRY_SERVICE}/plugins/\${PLUGIN_NAME}&#x22;\x7FIMAGE_TAG=&#x22;v0.0.1&#x22;\x7Foras login \${IMAGE_REGISTRY_SERVICE}\x7Foras push \${IMAGE_REPOSITORY}:\${IMAGE_TAG} \\\x7F    ./spec.yaml:application/vnd.module.wasm.spec.v1+yaml  \\\x7F    ./README.md:application/vnd.module.wasm.doc.v1+markdown \\\x7F    ./README_EN.md:application/vnd.module.wasm.doc.v1.en+markdown \\\x7F    ./plugin.tar.gz:application/vnd.oci.image.layer.v1.tar+gzip"><div></div></button></div></figure></div>
<h2 id="5-appendix">5. Appendix</h2>
<h3 id="51-default-icon-for-each-plugin-category">5.1 Default Icon for Each Plugin Category</h3>
<ul>
<li>Custom: <a href="https://img.alicdn.com/imgextra/i1/O1CN018iKKih1iVx287RltL_!!6000000004419-2-tps-42-42.png" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://img.alicdn.com/imgextra/i1/O1CN018iKKih1iVx287RltL_!!6000000004419-2-tps-42-42.png</a></li>
<li>Authentication and Authorization: <a href="https://img.alicdn.com/imgextra/i4/O1CN01BPFGlT1pGZ2VDLgaH_!!6000000005333-2-tps-42-42.png" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://img.alicdn.com/imgextra/i4/O1CN01BPFGlT1pGZ2VDLgaH_!!6000000005333-2-tps-42-42.png</a></li>
<li>Flow Control: <a href="https://img.alicdn.com/imgextra/i3/O1CN01bAFa9k1t1gdQcVTH0_!!6000000005842-2-tps-42-42.png" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://img.alicdn.com/imgextra/i3/O1CN01bAFa9k1t1gdQcVTH0_!!6000000005842-2-tps-42-42.png</a></li>
<li>Flow Monitor: <a href="https://img.alicdn.com/imgextra/i4/O1CN01aet3s61MoLOEEhRIo_!!6000000001481-2-tps-42-42.png" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://img.alicdn.com/imgextra/i4/O1CN01aet3s61MoLOEEhRIo_!!6000000001481-2-tps-42-42.png</a></li>
<li>Security Protection: <a href="https://img.alicdn.com/imgextra/i1/O1CN01jKT9vC1O059vNaq5u_!!6000000001642-2-tps-42-42.png" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://img.alicdn.com/imgextra/i1/O1CN01jKT9vC1O059vNaq5u_!!6000000001642-2-tps-42-42.png</a></li>
<li>Protocol Transformation: <a href="https://img.alicdn.com/imgextra/i2/O1CN01xIywow1mVGuRUjbhe_!!6000000004959-2-tps-42-42.png" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://img.alicdn.com/imgextra/i2/O1CN01xIywow1mVGuRUjbhe_!!6000000004959-2-tps-42-42.png</a></li>
</ul>`,e={title:"Wasm Plugin Image Specification",keywords:["wasm","image","oci"],description:"Wasm Plugin Image Specification",custom_edit_url:"https://github.com/higress-group/higress-group.github.io/blob/main/i18n/en-us/docusaurus-plugin-content-docs/current/user/wasm-image-spec.md"},n="/home/runner/work/higress-group.github.io/higress-group.github.io/src/content/docs/latest/en/user/wasm-image-spec.md",i=void 0,c=function(){return`
# Wasm Plugin Image Specification

## 1. Overview

This document defines the structure and building method of Higress Wasm Plugin images. When preparing, we referred to [Wasm Image Specification](https://github.com/solo-io/wasm/blob/master/spec/spec-compat.md).

## 2. Image Structure

Each image needs to be build in [OCI Image Specification](https://github.com/opencontainers/image-spec) based on \`scratch\`, and shall only contain following files:

- spec.yaml: Required. Metadata file of the plugin. Please refer to section 3 below for its format.
- README.md: Required. Readme file describing the usage of the plugin. Markdown format. Written in English or Chinese.
- README_{lang}.md: Optional. Readme file describing the usage of the plugin. Markdown format. \`lang\` can be \`ZH\` or \`EN\`.
- icon.png: Optional. Icon file of the plugin. A URL of the plugin icon can also be specified in spec.yaml. If both the file and the URL are configured, the file will be used for display.
- plugin.wasm: Required. The binary file of the plugin.

Each layer of the image can only contain a single file.

Except the layer containing plugin.wasm, the media type of other layers shall be set according to the file inside:

- spec.yaml: application/vnd.module.wasm.spec.v1+yaml 
- README.md: application/vnd.module.wasm.doc.v1+markdown
- README_{lang}.md: application/vnd.module.wasm.doc.v1.{lang}+markdown
- icon.png: application/vnd.module.wasm.icon.v1+png

plugin.wasm must be placed in the last layer of the image, with the media type of application/vnd.oci.image.layer.v1.tar+gzip.

## 3. Metadata File Format

The format of metadata file, \`spec.yaml\`, is as following, using the metadata of \`basic-auth\` plugin as an example:

\`\`\`yaml
apiVersion: 1.0.0  # The schema version of the content below. Always use to 1.0.0 for now.
info:
  category: auth # Plugin category. Options: auth (authentication and authorization), security (security protection), protocol (protocol transformation), flow-control, flow-monitor,custom
  name: basic-auth/v1  # Plugin name, which is the unique identifier of the plugin. It is recommended to add a version suffix, such as "/v1", just in case an incompatible upgrade in the future.
  title: Basic Auth # Display name. I18n supported.
  description: \u672C\u63D2\u4EF6\u5B9E\u73B0\u4E86\u57FA\u4E8E HTTP Basic Auth \u6807\u51C6\u8FDB\u884C\u8BA4\u8BC1\u9274\u6743\u7684\u529F\u80FD\u3002 # Plugin description. I18n supported.
  x-description-i18n: # I18n content of the description field above. Translated contents can be added using "x-{name}-i18n" fields for all i18n-supported fields.
    en-US: This plugin implements an authentication function based on HTTP Basic Auth standard.
  iconUrl: https://img.alicdn.com/imgextra/i1/O1CN01I7WjVs1K33EQjInid_!!6000000001107-2-tps-960-290.png # Optional. URL of plugin icon file.
  version: 1.0.0 # Plugin version
  contact: # Plugin contact
    name: Higress Team
    url: http://higress.io/
    email: admin@higress.io
spec:
  phase: AUTHN # Execution phase. Please refer to https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#PluginPhase
  priority: 0 # Execution priority within the given phase. Please refer to https://istio.io/latest/docs/reference/config/proxy_extensions/wasm-plugin/#WasmPlugin
  configSchema: # Schema of the plugin's runtime configurations, which shall be defined with the Schema object in OpenAPI 3.0.0 standard.
    openAPIV3Schema: # Please refer to https://openapi.apifox.cn/#schema-%E5%AF%B9%E8%B1%A1 for the data structure. Some fields which can be used for display support i18n.
      type: object
      properties:
        consumers:
          type: array
          x-scope: GLOBAL # Field effective scope. Options: GLOBAL (global configuration), RULE (rule-level configuration, which can be set associated to routes, domains or services.), ANY (Effective scope unrestricted). Optional. Default value is ANY.
          title: \u8C03\u7528\u65B9\u5217\u8868
          x-title-i18n:
            en-US: Consumer List
          description: \u670D\u52A1\u8C03\u7528\u65B9\u5217\u8868\uFF0C\u7528\u4E8E\u5BF9\u8BF7\u6C42\u8FDB\u884C\u8BA4\u8BC1
          x-description-i18n:
            en-US: List of service consumers which will be used in request authentication
          items:
            type: object
            properties:
              name:
                type: string
                title: \u540D\u79F0
                x-title-i18n:
                  en-US: Name
                description: \u8BE5\u8C03\u7528\u65B9\u7684\u540D\u79F0
                x-description-i18n:
                  en-US: The name of the consumer
                # Data validation shall be implemented according JSON Schema Validation Spec
                # https://json-schema.org/draft/2020-12/json-schema-validation.html
                # Following values are supported:
                # - maximum
                # - minimum
                # - maxLength
                # - minLength
                # - pattern
                # - maxItems
                # - minItems
                # - required
                minLength: 6 # Minimum length for data validation
                maxLength: 256 # Maximum length for data validation
                pattern: "^$" # Regular experssion for data validation
                example:
                  - consumer1
              credential:
                type: string
                title: \u8BBF\u95EE\u51ED\u8BC1
                x-title-i18n:
                  en-US: Credential
                description: \u8BE5\u8C03\u7528\u65B9\u7684\u8BBF\u95EE\u51ED\u8BC1
                x-description-i18n:
                  en-US: The credential of the consumer
                example:
                  - admin:123456
            required:
              - name
              - credential
        allow:
          type: array
          title: \u6388\u6743\u8BBF\u95EE\u7684\u8C03\u7528\u65B9\u5217\u8868
          x-title-i18n:
            en-US: Allowed Consumers
          description: \u5BF9\u4E8E\u5339\u914D\u4E0A\u8FF0\u6761\u4EF6\u7684\u8BF7\u6C42\uFF0C\u5141\u8BB8\u8BBF\u95EE\u7684\u8C03\u7528\u65B9\u5217\u8868
          x-description-i18n:
            en-US: Consumers to be allowed for matched requests
          items:
            type: string
            example:
              - consumer1
      required:
        - allow
        - consumers
      example:
        consumers:
          - name: consumer1
            credential: admin:123456
          - name: consumer2
            credential: guest:abc
        allow:
          - consumer2
\`\`\`

## 4. How to Build an Image
1. Start the builder container from the Higress root folder

\`\`\`bash
GO_VERSION="1.19"
TINYGO_VERSION="0.28.1"
ORAS_VERSION="1.0.0"
PLUGIN_NAME="hello-world"
BUILDER_IMAGE="higress-registry.cn-hangzhou.cr.aliyuncs.com/plugins/wasm-go-builder:go\${GO_VERSION}-tinygo\${TINYGO_VERSION}-oras\${ORAS_VERSION}"
docker run -v \${PWD}:/workspace -e PLUGIN_NAME=\${PLUGIN_NAME} -it --rm  /bin/bash
\`\`\`

2. Build Wasm file inside the container

\`\`\`bash
cd /workspace/plugins/wasm-go/extensions/\${PLUGIN_NAME}
go mod tidy
tinygo build -o ./plugin.wasm -scheduler=none -target=wasi -gc=custom -tags='custommalloc nottinygc_finalizer' ./main.go
\`\`\`

3. Build and push an OCI image

\`\`\`bash
tar czvf plugin.tar.gz plugin.wasm
IMAGE_REGISTRY_SERVICE=docker.io
IMAGE_REPOSITORY="\${IMAGE_REGISTRY_SERVICE}/plugins/\${PLUGIN_NAME}"
IMAGE_TAG="v0.0.1"
oras login \${IMAGE_REGISTRY_SERVICE}
oras push \${IMAGE_REPOSITORY}:\${IMAGE_TAG} \\
    ./spec.yaml:application/vnd.module.wasm.spec.v1+yaml  \\
    ./README.md:application/vnd.module.wasm.doc.v1+markdown \\
    ./README_EN.md:application/vnd.module.wasm.doc.v1.en+markdown \\
    ./plugin.tar.gz:application/vnd.oci.image.layer.v1.tar+gzip
\`\`\`

## 5. Appendix

### 5.1 Default Icon for Each Plugin Category

- Custom: https://img.alicdn.com/imgextra/i1/O1CN018iKKih1iVx287RltL_!!6000000004419-2-tps-42-42.png
- Authentication and Authorization: https://img.alicdn.com/imgextra/i4/O1CN01BPFGlT1pGZ2VDLgaH_!!6000000005333-2-tps-42-42.png
- Flow Control: https://img.alicdn.com/imgextra/i3/O1CN01bAFa9k1t1gdQcVTH0_!!6000000005842-2-tps-42-42.png
- Flow Monitor: https://img.alicdn.com/imgextra/i4/O1CN01aet3s61MoLOEEhRIo_!!6000000001481-2-tps-42-42.png
- Security Protection: https://img.alicdn.com/imgextra/i1/O1CN01jKT9vC1O059vNaq5u_!!6000000001642-2-tps-42-42.png
- Protocol Transformation: https://img.alicdn.com/imgextra/i2/O1CN01xIywow1mVGuRUjbhe_!!6000000004959-2-tps-42-42.png`},l=function(){return s},p=function(){return[{depth:2,slug:"1-overview",text:"1. Overview"},{depth:2,slug:"2-image-structure",text:"2. Image Structure"},{depth:2,slug:"3-metadata-file-format",text:"3. Metadata File Format"},{depth:2,slug:"4-how-to-build-an-image",text:"4. How to Build an Image"},{depth:2,slug:"5-appendix",text:"5. Appendix"},{depth:3,slug:"51-default-icon-for-each-plugin-category",text:"5.1 Default Icon for Each Plugin Category"}]},a=d((g,f,h)=>{const{layout:x,...t}=e;return t.file=n,t.url=i,r`${E()}${v(s)}`})});export{a as Content,u as __tla,l as compiledContent,a as default,n as file,e as frontmatter,p as getHeadings,c as rawContent,i as url};
