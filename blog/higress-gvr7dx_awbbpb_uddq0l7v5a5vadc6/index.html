<!DOCTYPE html><span class="blog-slug-wrapper"> <html lang="zh-cn" data-theme="light"> <head><meta charset="utf-8"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>如何使用 Higress 快速构建 AI 应用？ | Higress官网</title><link rel="canonical" href="https://higress.cn/blog/higress-gvr7dx_awbbpb_uddq0l7v5a5vadc6/"/><link rel="alternate" hreflang="zh-CN" href="https://higress.cn/blog/higress-gvr7dx_awbbpb_uddq0l7v5a5vadc6/"/><link rel="alternate" hreflang="en" href="https://higress.cn/en/blog/higress-gvr7dx_awbbpb_uddq0l7v5a5vadc6/"/><link rel="sitemap" href="/sitemap-index.xml"/><link rel="shortcut icon" href="/higress_logo.png" type="image/png"/><meta name="aplus-core" content="aplus.js"/><meta property="og:title" content="如何使用 Higress 快速构建 AI 应用？"/><meta property="og:type" content="article"/><meta property="og:url" content="https://higress.cn/blog/higress-gvr7dx_awbbpb_uddq0l7v5a5vadc6/"/><meta property="og:locale"/><meta property="og:site_name" content="Higress官网"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="如何使用 Higress 快速构建 AI 应用？"/><meta name="baidu-site-verification" content="codeva-x6yW4DqCn3"/><meta name="msvalidate.01" content="418883CE9AE2CAD01E7FC1A7B9F20801"/><meta name="twitter:description" content="如何使用 Higress 快速构建 AI 应用？"/><meta name="description" content="如何使用 Higress 快速构建 AI 应用？"/><meta property="og:description" content="如何使用 Higress 快速构建 AI 应用？"/><meta property="keywords" content="Higress"/> <!--初始化SDK-->   <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-YHS75WKFBR"></script> <meta name="generator" content="Astro v4.9.1"><meta name="robots" content="index, follow"><title>如何使用 Higress 快速构建 AI 应用？</title><link data-rh="true" rel="icon" href="https://img.alicdn.com/imgextra/i4/O1CN01AViQMJ1J2lY4OPRgv_!!6000000000971-2-tps-376-375.png"><link rel="stylesheet" href="/_astro/_slug_.8CUVaieU.css">
<style>.table-of-contents-wrapper ul{padding:0;list-style:none}.table-of-contents-wrapper a{--pad-inline: .5rem;display:block;border-radius:.25rem;padding-block:.25rem;padding-inline:calc(1rem * var(--depth) + var(--pad-inline)) var(--pad-inline);line-height:1.25}.table-of-contents-wrapper a[aria-current=true],.table-of-contents-wrapper a[aria-current=true]:hover,.table-of-contents-wrapper a[aria-current=true]:focus{color:var(--fallback-n,oklch(var(--n)/1))!important;background-color:var(--fallback-s,oklch(var(--s)/1))!important;border-left-style:solid;border-left-width:3px;border-left-color:var(--fallback-n,oklch(var(--n)/1));padding-left:.625rem!important;font-weight:400!important;border-radius:0!important}.table-of-contents-wrapper .isMobile a{--pad-inline: 1rem;display:flex;justify-content:space-between;gap:var(--pad-inline);border-top:1px solid var(--sl-color-gray-6);border-radius:0;padding-block:.5rem;color:var(--sl-color-text);font-size:var(--sl-text-sm);text-decoration:none;outline-offset:var(--sl-outline-offset-inside)}.table-of-contents-wrapper .isMobile:first-child>li:first-child>a{border-top:0}.table-of-contents-wrapper .isMobile a[aria-current=true],.table-of-contents-wrapper .isMobile a[aria-current=true]:hover,.table-of-contents-wrapper .isMobile a[aria-current=true]:focus{color:var(--sl-color-white);background-color:unset}.table-of-contents-wrapper .isMobile a[aria-current=true]:after{content:"";width:1rem;background-color:var(--sl-color-text-accent);-webkit-mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxNCAxNCc+PHBhdGggZD0nTTEwLjkxNCA0LjIwNmEuNTgzLjU4MyAwIDAgMC0uODI4IDBMNS43NCA4LjU1NyAzLjkxNCA2LjcyNmEuNTk2LjU5NiAwIDAgMC0uODI4Ljg1N2wyLjI0IDIuMjRhLjU4My41ODMgMCAwIDAgLjgyOCAwbDQuNzYtNC43NmEuNTgzLjU4MyAwIDAgMCAwLS44NTdaJy8+PC9zdmc+Cg==);mask-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxNCAxNCc+PHBhdGggZD0nTTEwLjkxNCA0LjIwNmEuNTgzLjU4MyAwIDAgMC0uODI4IDBMNS43NCA4LjU1NyAzLjkxNCA2LjcyNmEuNTk2LjU5NiAwIDAgMC0uODI4Ljg1N2wyLjI0IDIuMjRhLjU4My41ODMgMCAwIDAgLjgyOCAwbDQuNzYtNC43NmEuNTgzLjU4MyAwIDAgMCAwLS44NTdaJy8+PC9zdmc+Cg==);-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;flex-shrink:0}
</style>
<link rel="stylesheet" href="/_astro/index.DaJt_GEk.css">
<style>.badge-wrapper .sl-badge{display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-size:.75rem;padding:.125rem .375rem;line-height:1;color:var(--sl-color-bg-badge);overflow-wrap:anywhere;transform:scale(.83);transform-origin:0 0}.badge-wrapper .outline{outline-style:none!important;--sl-color-bg-badge: var(--fallback-wa,oklch(var(--wa)/1));--sl-color-border-badge: var(--fallback-p,oklch(var(--p)/1))}.badge-wrapper .default{--sl-color-bg-badge: var(--sl-color-accent-low);--sl-color-border-badge: var(--sl-color-accent)}.badge-wrapper .note{--sl-color-bg-badge: var(--sl-color-blue-low);--sl-color-border-badge: var(--sl-color-blue)}.badge-wrapper .danger{--sl-color-bg-badge: var(--sl-color-red-low);--sl-color-border-badge: var(--sl-color-red)}.badge-wrapper .success{--sl-color-bg-badge: var(--sl-color-green-low);--sl-color-border-badge: var(--sl-color-green)}.badge-wrapper .caution{--sl-color-bg-badge: var(--sl-color-orange-low);--sl-color-border-badge: var(--sl-color-orange)}.badge-wrapper .tip{--sl-color-bg-badge: var(--sl-color-purple-low);--sl-color-border-badge: var(--sl-color-purple)}.badge-wrapper [data-theme=light] .default{--sl-color-bg-badge: var(--sl-color-accent-high)}.badge-wrapper [data-theme=light] .note{--sl-color-bg-badge: var(--sl-color-blue-high)}.badge-wrapper [data-theme=light] .danger{--sl-color-bg-badge: var(--sl-color-red-high)}.badge-wrapper [data-theme=light] .success{--sl-color-bg-badge: var(--sl-color-green-high)}.badge-wrapper [data-theme=light] .caution{--sl-color-bg-badge: var(--sl-color-orange-high)}.badge-wrapper [data-theme=light] .tip{--sl-color-bg-badge: var(--sl-color-purple-high)}.sidebar-sublist-wrapper ul{--sl-sidebar-item-padding-inline: .5rem;list-style:none;padding:0}.sidebar-sublist-wrapper li{overflow-wrap:anywhere}.sidebar-sublist-wrapper ul ul li{margin-inline-start:var(--sl-sidebar-item-padding-inline);border-inline-start:1px solid var(--sl-color-hairline-light);padding-inline-start:var(--sl-sidebar-item-padding-inline)}.sidebar-sublist-wrapper .large{font-size:var(--sl-text-lg);font-weight:600;color:var(--sl-color-white)}.sidebar-sublist-wrapper .top-level>li+li{margin-top:.75rem}.sidebar-sublist-wrapper summary{display:flex;align-items:center;justify-content:space-between;padding:.2em var(--sl-sidebar-item-padding-inline);line-height:1.4;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sidebar-sublist-wrapper summary::marker,.sidebar-sublist-wrapper summary::-webkit-details-marker{display:none}.sidebar-sublist-wrapper .caret{transition:transform .2s ease-in-out;flex-shrink:0}.sidebar-sublist-wrapper [dir=rtl] .caret{transform:rotate(180deg)}.sidebar-sublist-wrapper [open]>summary .caret{transform:rotate(90deg)}.sidebar-sublist-wrapper a{display:block;border-radius:.25rem;text-decoration:none;color:var(--sl-color-gray-2);padding:.3em var(--sl-sidebar-item-padding-inline);line-height:1.4}.sidebar-sublist-wrapper a:hover,.sidebar-sublist-wrapper a:focus{color:var(--sl-color-white)}.sidebar-sublist-wrapper [aria-current=page],.sidebar-sublist-wrapper [aria-current=page]:hover,.sidebar-sublist-wrapper [aria-current=page]:focus{color:var(--fallback-n,oklch(var(--n)/1));background-color:var(--fallback-er,oklch(var(--er)/1));border-left-style:solid;border-left-width:4px;border-left-color:var(--fallback-n,oklch(var(--n)/1));padding-left:.625rem!important}.sidebar-sublist-wrapper a>*:not(:last-child),.sidebar-sublist-wrapper .group-label>*:not(:last-child){margin-inline-end:.25em}@media (min-width: 50rem){.sidebar-sublist-wrapper .top-level>li+li{margin-top:.5rem}.sidebar-sublist-wrapper .large{font-size:var(--sl-text-base)}.sidebar-sublist-wrapper a{font-size:var(--sl-text-sm)}}
.blog-slug-wrapper .sidebar-content{height:100%;padding:1rem var(--sl-sidebar-pad-x) 0;flex-direction:column;gap:1rem}.blog-slug-wrapper .right-sidebar-panel{flex-direction:column;justify-content:space-between;height:calc(100vh - 3.5rem);width:0px;overflow:hidden}.blog-slug-wrapper .right-sidebar-panel h2{color:var(--sl-color-white);font-size:var(--sl-text-h5);font-weight:600;line-height:var(--sl-line-height-headings);margin-bottom:.5rem}.blog-slug-wrapper .right-sidebar-panel a{display:block;font-size:var(--sl-text-xs);text-decoration:none;color:var(--sl-color-gray-3);overflow-wrap:anywhere}.blog-slug-wrapper .right-sidebar-panel a:hover{color:var(--sl-color-white)}.blog-slug-wrapper #toggle-sidebar{display:none}@media (min-width: 72rem){.blog-slug-wrapper #toggle-sidebar{display:block;position:fixed;top:40%;z-index:2;transform:translate(-35px)}.blog-slug-wrapper #toggle-sidebar a{padding-top:8px}.blog-slug-wrapper .rotate{transform:rotate(0)}.blog-slug-wrapper .collapsed{width:18%;padding:1rem var(--sl-sidebar-pad-x)}.blog-slug-wrapper .blog-fold{width:60%!important}}
</style>
<link rel="stylesheet" href="/_astro/index.B0a9OMnn.css">
<style>.link-icon:where(.astro-ld27styo){transition:width .3s ease}
toggle-content:where(.astro-bxjx6km4){--toggle-ml-width: 7rem;--toggle-xl-width: 7.5rem;--toggle-ml-height: 2rem;--toggle-xl-height: 2.5rem;--toggle-ml-font: .75rem;--toggle-xl-font: .85rem;--toggle-ml-switch-width: 3.5rem;--toggle-xl-switch-width: 3.75rem;--toggle-ml-switch-height: 1.5rem;--toggle-xl-switch-height: 2rem}.switch:where(.astro-bxjx6km4){width:var(--toggle-ml-width)}.switch-inner:where(.astro-bxjx6km4){width:200%;margin-left:-100%}.switch-inner:where(.astro-bxjx6km4):before,.switch-inner:where(.astro-bxjx6km4):after{display:block;float:right;width:50%;height:var(--toggle-ml-height);padding:0;line-height:var(--toggle-ml-height);font-size:var(--toggle-ml-font);box-sizing:border-box}.switch-inner:where(.astro-bxjx6km4):after{content:attr(data-on);padding-left:1.25rem}.switch-inner:where(.astro-bxjx6km4):before{content:attr(data-off);padding-right:1.25rem;text-align:right}.switch-switch:where(.astro-bxjx6km4){height:var(--toggle-ml-switch-height);width:var(--toggle-ml-switch-width);bottom:.25rem;border-radius:2rem;transition:all .3s ease-in 0s;text-align:right}.switch-switch:where(.astro-bxjx6km4):before{display:flex;content:attr(data-off);height:100%;font-size:var(--toggle-ml-font);align-items:center;justify-content:center}.switch-checkbox:where(.astro-bxjx6km4):checked+.switch-label:where(.astro-bxjx6km4) .switch-inner:where(.astro-bxjx6km4){margin-left:0}.switch-checkbox:where(.astro-bxjx6km4):checked+.switch-label:where(.astro-bxjx6km4) .switch-switch:where(.astro-bxjx6km4){right:0}.switch-checkbox:where(.astro-bxjx6km4):checked+.switch-label:where(.astro-bxjx6km4) .switch-switch:where(.astro-bxjx6km4):before{display:flex;content:attr(data-on);height:100%;font-size:var(--toggle-ml-font);align-items:center;justify-content:center}
.link-text:where(.astro-zb5a5pg4) .link-icon:where(.astro-zb5a5pg4){width:0;opacity:0;transition:transform .5s ease,width .3s ease,opacity .3s ease}.link-text:where(.astro-zb5a5pg4):hover .link-icon:where(.astro-zb5a5pg4){transform:translate(3px);opacity:1;width:8px}
</style>
<link rel="stylesheet" href="/_astro/tailwind.zDiNMQL3.css">
<link rel="stylesheet" href="/_astro/style.DmWAKxyO.css"><script type="module" src="/_astro/hoisted.BQuZ7G3m.js"></script>
<script type="module" src="/_astro/page.CIklkdzg.js"></script><script src="/_astro/Alert.astro_astro_type_script_index_0_lang.DaW0fwsv.js" type="module"></script><script src="/_astro/LanguageToggle.astro_astro_type_script_index_0_lang.C1TXaPhW.js" type="module"></script><script src="/_astro/Particles.astro_astro_type_script_index_0_lang.BiyDd7c3.js" type="module"></script></head> <body> <!-- <HomeHeader align="home" position={position} lang={Astro.props.lang} {...Astro.props} /> --> <span class="header-wrapper" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;">  <my-layout style="position: sticky; height: 3.5rem; --width: 100%;--height: 3.5rem;--xpadding: 1.5rem;" class="w-full backdrop-blur-md top-0 z-[10] bg-neutral flex justify-center"> <!-- 方便控制header宽度 --> <div class="header-content flex items-center justify-between" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <div class="left-content h-full flex flex-1 items-center after:content-[''] after:grow after:invisible" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <a class="no-underline flex" href="/" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <img class="logo" src="https://img.alicdn.com/imgextra/i1/O1CN01aIB6n51zcgTM5vhku_!!6000000006735-2-tps-156-48.png" alt="Higress-logo" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> </a> <span class="mobile-navbar-wrapper" style="--top: 3.5rem;"> <div class="mobile-navbar mobile-navbar h-full ml-4" style="--top: 3.5rem;"> <mobile-menu-button style="--top: 3.5rem;"> <button aria-expanded="false" aria-label="mobile-menu-button" style="--top: 3.5rem;"> <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6304" width="28" height="28" style="--top: 3.5rem;"> <path d="M192.037 287.953h640.124c17.673 0 32-14.327 32-32s-14.327-32-32-32H192.037c-17.673 0-32 14.327-32 32s14.327 32 32 32zM832.161 479.169H438.553c-17.673 0-32 14.327-32 32s14.327 32 32 32h393.608c17.673 0 32-14.327 32-32s-14.327-32-32-32zM832.161 735.802H192.037c-17.673 0-32 14.327-32 32s14.327 32 32 32h640.124c17.673 0 32-14.327 32-32s-14.327-32-32-32zM319.028 351.594l-160 160 160 160z" class="fill-secondary" p-id="6305" style="--top: 3.5rem;"></path> </svg> </button> </mobile-menu-button> <div class="navbar-panel bg-secondary" style="--top: 3.5rem;"> <div class="navbar-content flex" style="--top: 3.5rem;"> <span class="mobile-nav-sublist-wrapper"> <ul class="top-level"> <li> <a href="/docs/latest/overview/what-is-higress/" class="large flex items-center"> <span>文档</span> </a> </li><li> <a href="/plugin/" class="large flex items-center"> <span>AI 插件</span> </a> </li><li> <a href="/cloud/" class="large flex items-center"> <span>企业版 Higress</span> </a> </li><li> <a href="/blog/" class="large flex items-center"> <span>博客</span> </a> </li><li> <details> <summary> <div class="group-label"> <span class="large undefined">社区</span> </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: #818598;--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="mobile-nav-sublist-wrapper"> <ul>  </ul> </span>  </details> </li><li> <a href="/docs/developers/developers_dev/" class="large flex items-center"> <span>开发者</span> </a> </li><li> <a href="http://demo.higress.io/" class="large flex items-center"> <span>控制台样例</span> </a> </li><li> <a href="/faq/wuyi-intro/" class="large flex items-center"> <span>答疑样例</span> </a> </li> </ul> </span>  </div> </div> </div> </span>   </div> <div class="center-content justify-center flex-2 h-full" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <span class="navbar-wrapper"> <navbar-component class="navbar-component h-full"> <div class="pc-navbar pc-navbar h-full"> <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/docs/latest/overview/what-is-higress/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> 文档 </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/plugin/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> AI 插件 </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/cloud/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> 企业版 Higress </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/blog/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full toggle-text-active"> 博客 </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="hover" class="toggle-component h-full static"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <div class="toggle-text flex items-center justify-center h-full toggle-text-active"> 社区 </div>  <svg width="10" height="7" viewBox="0 0 10 7" fill="none" xmlns="http://www.w3.org/2000/svg" data-updown class="ml-2"> <path d="M8.05264 2L5.05264 5.00649L2.05264 2" stroke="#a3a6b3" stroke-width="1.25" stroke-linecap="square"></path> </svg> </div> <div class="toggle-dropdown w-fit inset-x-0 absolute t-3.5rem">  <menu-container class="menu-container dropdown-docs w-screen h-screen flex flex-col justify-start items-center"> <div class="bg-neutral p-10 w-full flex justify-center"> <div class="w-fit"> <div class="flex justify-between mb-[3.5rem]"> <div class="flex"> <!-- 社区label --> <div class="border-l border-warning flex flex-col px-7 min-w-[12rem]"> <span class="text-xs text-warning mb-2">社区</span> <a href="https://github.com/higress-group/higress-group.github.io/issues" target="_blank" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> 报告文档问题  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a> <a href="/docs/developers/contributor-guide/guide_dev/" target="_self" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> 贡献社区  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a> <a href="https://github.com/alibaba/higress/graphs/contributors" target="_blank" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> 贡献者  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a>  </div> <!-- 事件、资源label --> <div class="border-l border-warning flex flex-col px-7 mr-10"> <span class="text-xs text-warning mb-2">资源</span> <a href="/blog/" target="_self" class="link-text cursor-pointer no-underline flex items-center w-fit text-neutral text-sm mt-3 astro-zb5a5pg4"> 博客  <svg version="1.1" width="8" height="8" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="link-icon  ml-2 fill-neutral astro-zb5a5pg4"> <g transform="matrix(-1,0,0,1,16,0)" class="astro-zb5a5pg4"> <path d="M9.27237,2.16302L9.27237,6.99801Q9.27237,7.26839,9.08915,7.45161Q8.905925,7.63483,8.636183,7.6342Q8.365805,7.6342,8.183221,7.45097Q8.000636137,7.26775,8,6.99801L8,0.636183Q8,0.365805,8.183221,0.183221Q8.366441,0.000636364,8.636183,0L14.99801,0Q15.26839,0,15.451609999999999,0.183221Q15.634830000000001,0.366441,15.63419,0.636183Q15.63419,0.906561,15.45097,1.08978Q15.26775,1.273,14.99801,1.27237L10.16302,1.27237L15.825050000000001,6.93439Q16,7.10935,16,7.37972Q16,7.6501,15.825050000000001,7.82505Q15.6501,8,15.379719999999999,8Q15.10935,8,14.93439,7.82505L9.27237,2.16302Z" fill-opacity="1" class="astro-zb5a5pg4"></path> </g> </svg>  </a>  </div> </div> <div class="flex" id="blog-card-container"> <div class="relative blog-card w-[16.875] h-[22.5rem] rounded-2xl p-2 flex flex-col ml-4 "> <img src="https://img.alicdn.com/imgextra/i4/O1CN01bGnAVW1pFeLFnlaQL_!!6000000005331-2-tps-508-370.png" alt="Higress case" class="rounded-lg" width="254" height="185" loading="lazy" decoding="async"> <p class="w-[15.875rem] text-lg line-clamp-2 mt-3 text-base-100"> API赋能AI，AI网关零代码解决AI幻觉问题 </p> <span class="not-content"><a class="btn rounded-3xl w-[8.5rem] h-[2.5rem] absolute bottom-2 article-button border-none text-secondary no-underline" target="_self" rel="noopener noreferrer" id="article-button" href="/blog/higress-gvr7dx_awbbpb_im44tpldqyt8c97d/?source=blog_article">阅读文章</a></span> </div><div class="relative blog-card w-[16.875] h-[22.5rem] rounded-2xl p-2 flex flex-col ml-4 "> <img src="https://img.alicdn.com/imgextra/i4/O1CN01zfayJW1Lhe4kliPv9_!!6000000001331-2-tps-508-370.png" alt="Higress case" class="rounded-lg" width="254" height="185" loading="lazy" decoding="async"> <p class="w-[15.875rem] text-lg line-clamp-2 mt-3 text-base-100"> Higress 发布 v1.4，开放 AI 网关能力，增强云原生能力 </p> <span class="not-content"><a class="btn rounded-3xl w-[8.5rem] h-[2.5rem] absolute bottom-2 article-button border-none text-secondary no-underline" target="_self" rel="noopener noreferrer" id="article-button" href="/blog/higress-gvr7dx_awbbpb_picigqfume3k5lf3/?source=blog_article">阅读文章</a></span> </div> </div>  </div> <!-- 联系我们 --> <div class="w-[70rem] contact-us flex items-center justify-between rounded-2xl h-9 pl-10 pr-[8.5rem]"> <span class="text-success text-xs leading-9 tracking-[0.15em]"> 联系我们 </span> <div class="flex items-center cursor-pointer"> <a target="_blank" href="https://github.com/alibaba/higress" class="mr-16 flex items-center no-underline"> <svg viewBox="0 80 1024 800" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3233" width="16" height="16"> <path d="M20.48 503.72608c0 214.4256 137.4208 396.73856 328.94976 463.6672 25.8048 6.5536 21.87264-11.8784 21.87264-24.33024v-85.07392c-148.93056 17.44896-154.86976-81.1008-164.94592-97.52576-20.23424-34.52928-67.91168-43.33568-53.69856-59.76064 33.91488-17.44896 68.48512 4.42368 108.46208 63.61088 28.95872 42.88512 85.44256 35.6352 114.15552 28.4672a138.8544 138.8544 0 0 1 38.0928-66.7648c-154.25536-27.60704-218.60352-121.77408-218.60352-233.79968 0-54.31296 17.94048-104.2432 53.0432-144.54784-22.36416-66.43712 2.08896-123.24864 5.3248-131.6864 63.81568-5.7344 130.00704 45.6704 135.168 49.68448 36.2496-9.78944 77.57824-14.9504 123.82208-14.9504 46.4896 0 88.064 5.3248 124.5184 15.23712 12.288-9.4208 73.80992-53.53472 133.12-48.128 3.15392 8.43776 27.0336 63.93856 6.02112 129.4336 35.59424 40.38656 53.69856 90.76736 53.69856 145.24416 0 112.18944-64.7168 206.4384-219.42272 233.71776a140.0832 140.0832 0 0 1 41.7792 99.9424v123.4944c0.86016 9.87136 0 19.6608 16.50688 19.6608 194.31424-65.49504 334.2336-249.15968 334.2336-465.5104C1002.57792 232.48896 782.66368 12.77952 511.5904 12.77952 240.18944 12.65664 20.48 232.40704 20.48 503.72608z" fill="currentColor" p-id="3234"></path> </svg> <span class="ml-2 mt-1 text-sm text-secondary">GitHub</span> </a> <div class="mr-16 hoverable relative"> <img class="tooltip hidden w-40 absolute bottom-9" src="https://img.alicdn.com/imgextra/i2/O1CN01V3D0Ih1ood1zSuMUJ_!!6000000005272-0-tps-472-524.jpg" alt="Higress Dingding Code"> <span class="text-neutral flex items-center"> <svg class="icon" viewBox="0 50 1024 800" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4747" width="16" height="16"> <path d="M0 0h1024v1024H0z" class="secondary-fill" fill-opacity="0" p-id="4748"></path><path d="M786.978133 481.6896c-153.770667-117.5552-327.133867-273.237333-517.188266-440.183467-14.984533-13.141333-28.2624-7.953067-34.952534 9.5232-42.8032 111.957333-1.297067 211.421867 65.774934 268.731734 67.345067 57.582933 167.492267 110.592 228.829866 138.683733 2.389333 1.092267 0.3072 4.573867-2.116266 3.515733-112.674133-49.152-191.044267-84.650667-297.3696-165.819733-11.434667-8.738133-23.04-5.3248-24.405334 11.707733-8.704 107.042133 60.484267 191.146667 137.728 219.5456 47.786667 17.6128 100.0448 27.3408 148.548267 33.109334 2.525867 0.341333 1.9456 4.027733-0.580267 4.027733-62.498133 0.2048-138.001067-14.609067-203.332266-39.458133-13.789867-5.256533-18.5344 5.632-16.418134 14.267733 11.1616 45.226667 67.652267 114.346667 157.5936 128.887467 16.827733 2.730667 34.747733 3.072 50.722134 2.628266 3.7888-0.136533 4.7104 1.9456 3.4816 4.846934 0 0-61.098667 103.6288-63.761067 108.066133-2.082133 3.447467-0.8192 6.212267 3.515733 6.212267h80.622934c3.754667 0 6.0416 2.389333 4.096 5.5296-1.877333 3.140267-107.656533 176.7424-112.64 185.0368-4.369067 7.202133 0.785067 12.731733 8.942933 6.826666 8.192-5.9392 346.180267-250.88 355.805867-257.911466 4.437333-3.208533 3.413333-7.5776-2.833067-7.5776h-72.2944c-4.744533 0-5.768533-3.140267-2.56-6.314667 3.242667-3.1744 82.090667-80.964267 110.08-110.08 29.184-30.378667 44.100267-86.050133-5.290667-123.8016" class="secondary-fill" p-id="4749"></path> </svg> <span class="ml-2 mt-1 text-sm text-secondary">钉钉</span> </span> </div> </div> </div> </div> </div> <div class="dropdown-overlay w-full flex-1 bg-neutral-900/[.4]"></div> </menu-container>    </div> </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="/docs/developers/developers_dev/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> 开发者 </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item ">  <a href="http://demo.higress.io/" target="_blank" class="toggle-text flex items-center justify-center no-underline h-full "> 控制台样例 </a>   </div>  </toggle-component> </span>  <span class="toggle-wrapper"> <toggle-component data-trigger="click" class="toggle-component h-full relative"> <div class="toggle-trigger relative cursor-pointer flex items-center h-full item item-last-child">  <a href="/faq/wuyi-intro/" target="_self" class="toggle-text flex items-center justify-center no-underline h-full "> 答疑样例 </a>   </div>  </toggle-component> </span>   </div> </navbar-component> </span>  </div> <div class="right-content flex flex-1 items-center md:gap-4  before:content-[''] before:grow before:invisible" style="--width: 100%;--height: 3.5rem;--xpadding: 1.5rem;"> <div class="astro-bxjx6km4"> <!-- pc --> <toggle-content class="switch float-left relative m-0 rounded-[2rem] max-md:hidden astro-bxjx6km4"> <input disabled data-switch class="switch-checkbox hidden astro-bxjx6km4" id="pc-toggle-switch" type="checkbox"> <!-- container --> <label class="switch-label block overflow-hidden cursor-pointer rounded-[2rem]  
                bg-language
             astro-bxjx6km4" for="pc-toggle-switch"> <!-- static --> <span class="switch-inner block 
                    text-language-button
                 astro-bxjx6km4" data-on="中文" data-off="EN"></span> <!-- active --> <span class="switch-switch absolute float-right mx-1 
                    text-language-button-active
                    bg-language-button
                 astro-bxjx6km4" data-on="EN" data-off="中文"></span> </label> </toggle-content> <!-- mobile --> <div data-switch class="w-[3.5rem] h-[1.5rem] leading-[1.5rem] text-xs text-center rounded-2xl bg-gray-12 max-md:inline-block md:hidden border astro-bxjx6km4" id="pc-toggle-switch"> 中文 </div> </div>   <sl-doc-search data-translations="{&#34;translations&#34;:{&#34;button&#34;:{},&#34;modal&#34;:{&#34;searchBox&#34;:{},&#34;startScreen&#34;:{},&#34;errorScreen&#34;:{},&#34;footer&#34;:{},&#34;noResultsScreen&#34;:{}}}}"> <button type="button" class="DocSearch DocSearch-Button"> <span class="DocSearch-Button-Container"> <svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"> <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> <span class="DocSearch-Button-Placeholder"></span> </span> <span class="DocSearch-Button-Keys"></span> </button> </sl-doc-search>   </div> </div> </my-layout> </span>      <div class="w-full"> <div class="w-[20%] sidebar-content fixed overflow-auto h-full hidden 2xl:inline-block xl:inline-block lg:inline-block md:inline-block"> <blog-theme> <span class="sidebar-sublist-wrapper"> <ul class="top-level"> <li> <details open> <summary> <div class="group-label"> <span class="large">技术文章</span>  </div> <svg aria-hidden="true" class="caret astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <span class="sidebar-sublist-wrapper"> <ul> <li> <a href="/blog/higress-gvr7dx_awbbpb_rf96wdxo9lctgng8/" class="flex items-center"> <span>GeoIP 结合 Prompt 赋能 LLM：基 于 AI 网关实现个性化与精确化问答</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_dxp91huk34ts4nik/" class="flex items-center"> <span>多层网关统一成趋势，如何构建全能型网关</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_im44tpldqyt8c97d/" class="flex items-center"> <span>API赋能AI，AI网关零代码解决AI幻觉问题</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_bo9gbceraxmft62n/" class="flex items-center"> <span>Wasm 实现 Higress 扩展，性能是 Spring Cloud Gateway 的 3 倍！</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_rggp2v9saa6gehsg/" class="flex items-center"> <span>Higress全新Wasm运行时，性能大幅提升</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_sgavomwlumko3kl7/" class="flex items-center"> <span>Higress 开源后，我们整理了开发者最关心的 15 个问题</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_xdxim253zzta4bun/" class="flex items-center"> <span>Higress + Nacos 微服务网关最佳实践</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_uddq0l7v5a5vadc6/" aria-current="page" class="flex items-center"> <span>如何使用 Higress 快速构建 AI 应用？</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_tp0pgbnsg4bef0x1/" class="flex items-center"> <span>OpenAI 国内停服，除了停机迁移，这个方案更平滑</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_picigqfume3k5lf3/" class="flex items-center"> <span>Higress 发布 v1.4，开放 AI 网关能力，增强云原生能力</span>   </a> </li><li> <a href="/blog/pilot-debug/" class="flex items-center"> <span>教程：如何在本地开发和调试 Higress Pilot</span>   </a> </li><li> <a href="/blog/console-dev/" class="flex items-center"> <span>教程：如何在本地开发和调试 Higress 控制台</span>   </a> </li><li> <a href="/blog/admin-sdk-intro/" class="flex items-center"> <span>如何使用 Higress Admin SDK 进行配置管理</span>   </a> </li><li> <a href="/blog/higress-code/" class="flex items-center"> <span>higress-core源码分析</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_tp0pgbnsg4bef0x1-copy/" class="flex items-center"> <span>迅速get云原生网关，阿里云商业版Ingress</span>   </a> </li><li> <a href="/blog/e2e-debug/" class="flex items-center"> <span>教程：如何在本地进行higress调试和端到端测试</span>   </a> </li><li> <a href="/blog/release-13/" class="flex items-center"> <span>Higress 开源一周年：新版本，新标准，新工具，新征程</span>   </a> </li><li> <a href="/blog/plugin-transformer/" class="flex items-center"> <span>通过 Higress Wasm 插件 3 倍性能实现 Spring-cloud-gateway 功能</span>   </a> </li><li> <a href="/blog/config-with-file/" class="flex items-center"> <span>基于文件配置实现 Higress 极简独立部署</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_un7afz9yhq61u2fk/" class="flex items-center"> <span>下一代云原生网关Higress：基于Wasm开发JWT认证插件</span>   </a> </li><li> <a href="/blog/configmap/" class="flex items-center"> <span>Higress 全局配置控制面原理分析</span>   </a> </li><li> <a href="/blog/ai_plugin/" class="flex items-center"> <span>Higress助力AI大模型企业级应用落地</span>   </a> </li><li> <a href="/blog/release-100/" class="flex items-center"> <span>上线控制台，降低使用门槛 ｜ Higress 1.0.0 RC 版本发布</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_gk5nkrhm7uvuulgg/" class="flex items-center"> <span>Higress GitHub star 突破 1k ，来自社区开发者和用户的寄语</span>   </a> </li><li> <a href="/blog/release-070/" class="flex items-center"> <span>Higress 0.7.0 版本发布：GA 进入倒计时</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_uwbg4wym8snz2m0z/" class="flex items-center"> <span>Higress 0.6.0 版本发布：更简单，更易用</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_fi4t7317cvughlzh/" class="flex items-center"> <span>Higress 实战：30 行代码写一个 Wasm Go插件</span>   </a> </li><li> <a href="/blog/higress-gvr7dx_awbbpb_pcctqnntrosrhh0d/" class="flex items-center"> <span>Higress 社区周会记要（2022/11/26）</span>   </a> </li><li> <a href="/blog/higress/" class="flex items-center"> <span>阿里巴巴重磅开源云原生网关</span>   </a> </li> </ul> </span>  </details> </li> </ul> </span>  </blog-theme>  </div> <div class="blog-slug-container w-full 2xl:ml-[20%] xl:ml-[20%] lg:ml-[20%] md:ml-[20%] md:w-[80%] inline-block"> <div id="back-btn" class="pt-4 pl-6"> <span class="not-content"><a class="btn btn btn-secondary rounded-3xl no-underline" target="_self" rel="noopener noreferrer"> <svg aria-hidden="true" class="text-lg align-middle astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="ml-0.5">BACK</span> </a></span> </div> <span class="markdown-detail-wrapper"> <div class="sl-markdown-content"> <div class="hero-image">  </div> <main> <div class="website-prose mx-auto"> <div class="title"> <h1 id="_top">如何使用 Higress 快速构建 AI 应用？</h1> <div></div> <hr> </div>  <p>随着AI时代到来，基于大模型的应用对网关提出了新的要求，例如在不同LLM提供商之间进行负载均衡、构建AI应用的可观测能力、基于token的限流保护与配额管理、AI应用内容安全等等。Higress基于企业内外的丰富场景沉淀了众多面向AI的功能，推出了AI原生的API网关形态并且全部开源。<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1721300837717-eff92765-e9f6-4eca-bb73-573e7c9cb927.png#clientId=uf44bdd73-e1d6-4&from=paste&height=2045&id=ua81a750e&originHeight=4500&originWidth=8000&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=11007747&status=done&style=none&taskId=ue3e6e350-6690-4a08-83e6-c61c523db4b&title=&width=3636.3635575475787" alt="image.png" referrerpolicy="no-referrer"/><br/><a href="https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">ChatGPT-Next-Web</a> 是一个开源的前端项目，用于提供大模型聊天窗口，支持接入多种大模型，本文基于Higress、通义千问以及 ChatGPT-Next-Web，演示 Higress 如何兼容 openai 协议，并逐步搭建一个体系完整的LLM应用，应用最终架构如图所示：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1722309029970-f0abf339-1a20-4486-9e89-99e9656a8057.png#clientId=u81875feb-61ba-4&from=paste&height=179&id=ub97bf679&originHeight=394&originWidth=2582&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=108669&status=done&style=none&taskId=ub16da7c7-9931-4896-9867-bc2c6b50787&title=&width=1173.636338198481" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="rH4kG"></a>
<h1 id="ai-代理">AI 代理</h1>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-agent?spm=a2c4g.11186623.0.0.2927178eciPER4" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-agent?spm=a2c4g.11186623.0.0.2927178eciPER4</a></p>
<a name="oHwbX"></a>
<h2 id="应用架构">应用架构</h2>
<p>首先，我们先通过网关快速部署一个可以进行对话的聊天应用，其架构如下图所示：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919280445-48f48c11-8929-403b-9ce6-7b06ff072e37.png#clientId=ud0363e53-115b-4&from=paste&height=203&id=u6a66a9f0&originHeight=446&originWidth=1236&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=343430&status=done&style=none&taskId=ue232df06-2211-47ac-bd93-55df82c0ae3&title=&width=561.8181696411009" alt="image.png" referrerpolicy="no-referrer"/><br/>LLM服务使用通义千问，服务类型为DNS。路由及服务创建完成后如下图所示：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719891015586-43314576-c14a-4c83-a46a-6766292b7c58.png#clientId=ud0363e53-115b-4&from=paste&height=113&id=ucad28ecd&originHeight=249&originWidth=2302&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=258585&status=done&style=none&taskId=u32c2dc97-2aac-4d58-abe4-dcc71ad4219&title=&width=1046.3636136843159" alt="image.png" referrerpolicy="no-referrer"/><br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719890813791-697f2d3f-1b31-4cd2-9ca6-c4fcd18cbeff.png#clientId=ud0363e53-115b-4&from=paste&height=138&id=u08408532&originHeight=304&originWidth=1392&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=203741&status=done&style=none&taskId=ua8f523cc-eef4-453b-af48-443f7535b6c&title=&width=632.7272590132787" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="OHezy"></a>
<h2 id="插件配置">插件配置</h2>
<p>设置路由级插件规则，选择在llm路由下生效，配置如下：</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.1vui4.css"/><script type="module" src="/_astro/ec.dy9ns.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">provider</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">type</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">qwen</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">apiTokens</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#9ECBFF">sk-xxxxxxxxxxxxxxxxxxxxxx</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">timeout</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">1200000</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">modelMapping</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">&#39;gpt-3.5-turbo&#39;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">qwen-turbo</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">&#39;gpt-4&#39;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">qwen-max</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#9ECBFF">&#39;*&#39;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">qwen-max</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="provider:  type: qwen  apiTokens:    - sk-xxxxxxxxxxxxxxxxxxxxxx  timeout: 1200000  modelMapping:    'gpt-3.5-turbo': qwen-turbo    'gpt-4': qwen-max    '*': qwen-max"><div></div></button></div></figure></div>
<a name="qe1gH"></a>
<h2 id="插件效果">插件效果</h2>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1722505434359-63b5007d-df3c-4c0e-93cc-0999526dca12.png#clientId=ufc630aba-31ca-4&from=paste&height=801&id=u86acd2c2&originHeight=1762&originWidth=2434&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=2086089&status=done&style=none&taskId=ucadc1a08-fa7d-47ad-8dd6-ce5eda73039&title=&width=1106.363612383851" alt="1719891176668-c2db8611-1431-4bac-a2f6-d7a829b708fe.png" referrerpolicy="no-referrer"/></p>
<a name="aoQWd"></a>
<h1 id="ai-可观测">AI 可观测</h1>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-observable?spm=a2c4g.11186623.0.0.42b4d95f14d39z" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-observable?spm=a2c4g.11186623.0.0.42b4d95f14d39z</a></p>
<a name="DguUr"></a>
<h2 id="应用架构-1">应用架构</h2>
<p>现在，我们已经有了基础的对话功能，作为一款网关产品，我们希望在网关这个统一的入口处对各个服务、路由的请求情况进行观测。考虑到LLM请求主要以token为观测目标，网关提供了对token的观测机制，包含路由级、服务级、模型级的token用量观测。<br/>现在，我们改变上文的应用架构，插入可观测插件，改造后如下图所示：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919264130-93ce6e38-9e5f-440e-a4f7-2c743d606148.png#clientId=ud0363e53-115b-4&from=paste&height=225&id=u6b60ac28&originHeight=494&originWidth=1454&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=400291&status=done&style=none&taskId=u5fc32a53-5b18-4bb3-83a0-e8c3cc19258&title=&width=660.9090765842725" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="KUhTj"></a>
<h2 id="插件配置-1">插件配置</h2>
<p>依然是选择在llm这条路由上生效，插件配置如下：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">enable</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">true</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="enable: true"><div></div></button></div></figure></div>
<a name="Lah54"></a>
<h2 id="插件效果-1">插件效果</h2>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719899003894-22827cf8-54c9-402c-904d-ababea18c35b.png#clientId=ud0363e53-115b-4&from=paste&height=487&id=u52864bbd&originHeight=1072&originWidth=3294&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=1212199&status=done&style=none&taskId=uc5f29f99-0358-4b04-ae2c-279bdacb920&title=&width=1497.2726948202155" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="OnniO"></a>
<h1 id="ai-内容安全">AI 内容安全</h1>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-content-security?spm=a2c4g.11186623.0.0.4408488dYGAm2X" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-content-security?spm=a2c4g.11186623.0.0.4408488dYGAm2X</a></p>
<a name="aaqW1"></a>
<h2 id="应用架构-2">应用架构</h2>
<p>大模型通常是通过学习互联网上广泛可用的数据来训练的，它们有可能在过程中学习到并复现有害内容或不良言论，因此，当大模型未经过适当的过滤和监控就生成回应时，它们可能产生包含有害语言、误导信息、歧视性言论甚至是违反法律法规的内容。正是因为这种潜在的风险，大模型中的内容安全就显得异常重要。<br/>基于AI内容安全插件，通过简单的配置即可对接<a href="https://help.aliyun.com/document_detail/28417.html?spm=a2c4g.28415.0.0.1dab1f55pipQr9" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">阿里云内容安全</a>，为大模型问答的合规性保驾护航。<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/jpeg/90456445/1718353606448-65ea40f8-67ba-4588-a646-97ac201850d4.jpeg" alt="" referrerpolicy="no-referrer"/><br/>配置AI内容安全插件后，应用架构如下图所示：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919247875-f93f64cd-e03a-40c3-b67d-b77346dabe5a.png#clientId=ud0363e53-115b-4&from=paste&height=195&id=uf56fe0ea&originHeight=428&originWidth=1696&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=414318&status=done&style=none&taskId=u430097ec-4abf-449b-b9cc-0d0eeab68b2&title=&width=770.9090742000867" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="M186m"></a>
<h2 id="插件配置-2">插件配置</h2>
<p>首先需要在网关配置内容安全的服务：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719903391779-77a1ad66-27b2-47f2-bbd2-187eca3c7575.png#clientId=ud0363e53-115b-4&from=paste&height=539&id=u103376d8&originHeight=1186&originWidth=1436&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=728523&status=done&style=none&taskId=ua9d55659-08a4-4b50-b26c-b1729e6668a&title=&width=652.7272585797904" alt="image.png" referrerpolicy="no-referrer"/><br/>配置服务后，开启内容安全插件，选择对llm路由生效：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">serviceSource</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">dns</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">green-cip</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">domain</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">green-cip.cn-hangzhou.aliyuncs.com</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">ak</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxxxxxxxxxxxxx</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">sk</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxxxxxxxxxxxxx</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="serviceSource: dnsserviceName: green-cipservicePort: 443domain: green-cip.cn-hangzhou.aliyuncs.comak: xxxxxxxxxxxxxxxxxsk: xxxxxxxxxxxxxxxxx"><div></div></button></div></figure></div>
<a name="X22pR"></a>
<h2 id="插件效果-2">插件效果</h2>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1722505266077-c08298ee-d788-40eb-9a3c-ee3f06e1450d.png#clientId=ufc630aba-31ca-4&from=paste&height=800&id=u1e1059c0&originHeight=1760&originWidth=2430&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=2298898&status=done&style=none&taskId=u3ef7edcb-caa7-4bdf-bf97-5a334c4cddc&title=&width=1104.5454306050772" alt="1719903187415-6ef2828c-6a6f-4d5e-acf8-9d4e760dd8ec.png" referrerpolicy="no-referrer"/><br/>登录阿里云内容安全控制台，可以查看每条请求的审计记录：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719903494716-d685847c-465d-4856-98a3-7bc92f0f0b44.png#clientId=ud0363e53-115b-4&from=paste&height=287&id=ufeed118e&originHeight=632&originWidth=2558&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=603772&status=done&style=none&taskId=u031f4f53-a889-4598-8ef0-4527f17118c&title=&width=1162.7272475258383" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="nEKyA"></a>
<h1 id="ai-token-限流">AI Token 限流</h1>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-token-current-limiting?spm=a2c4g.11186623.0.i4" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-token-current-limiting?spm=a2c4g.11186623.0.i4</a></p>
<a name="vCKxn"></a>
<h2 id="应用架构-3">应用架构</h2>
<p><code dir="auto">ai-token-ratelimit</code>插件实现了基于特定键值实现token限流，键值来源可以是 URL 参数、HTTP 请求头、客户端 IP 地址、consumer 名称、cookie中 key 名称。其借助redis实现全局的token限流。<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/jpeg/90456445/1719305294634-9bfa6ddd-4ef9-4ef0-9b69-7af3b370b8d4.jpeg" alt="" referrerpolicy="no-referrer"/><br/>创建一个redis服务并且在网关进行配置：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719910074964-11633851-b5de-4efd-9245-76ebbd7d8319.png#clientId=ud0363e53-115b-4&from=paste&height=80&id=z8176&originHeight=177&originWidth=2161&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=167269&status=done&style=none&taskId=u4c835c6a-2157-4e44-8db9-9231b37abb9&title=&width=982.2727059825397" alt="image.png" referrerpolicy="no-referrer"/><br/>之后添加AI Token限流插件，应用架构为：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919211717-049b4d9b-f77c-4912-a068-bfd8bde657da.png#clientId=ud0363e53-115b-4&from=paste&height=210&id=ud529d6cc&originHeight=462&originWidth=1940&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=469172&status=done&style=none&taskId=ue4648981-869d-46ba-a71f-57f74e9b99e&title=&width=881.8181627052878" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="PeR06"></a>
<h2 id="插件配置-3">插件配置</h2>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">rule_name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">default_rule</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">rule_items</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">limit_by_per_ip</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">from-remote-addr</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">limit_keys</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">      </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">key</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">0.0.0.0/0</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85E89D">token_per_minute</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">100</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">redis</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">service_name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">redis.static</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">service_port</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">6379</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">username</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxx</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">password</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxx</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">rejected_code</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">429</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">rejected_msg</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">您的请求频率过高，请稍后再试。</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="rule_name: default_rulerule_items:  - limit_by_per_ip: from-remote-addr    limit_keys:      - key: 0.0.0.0/0        token_per_minute: 100redis:  service_name: redis.static  service_port: 6379  username: xxxxxx  password: xxxxxxrejected_code: 429rejected_msg: 您的请求频率过高，请稍后再试。"><div></div></button></div></figure></div>
<p>以上插件配置效果为每个ip地址每分钟内只能使用100个token，当超过token限制时，返回429，响应body为“您的请求频率过高，请稍后再试。”</p>
<a name="awhGj"></a>
<h2 id="插件效果-3">插件效果</h2>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1722505303402-0d85a7d6-7660-4800-a082-a45eb4fa0656.png#clientId=ufc630aba-31ca-4&from=paste&height=796&id=u546a2055&originHeight=1752&originWidth=2426&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=2591649&status=done&style=none&taskId=u1e465d4c-42e3-416f-924d-1e439e5f129&title=&width=1102.7272488263034" alt="1719910233246-351b4301-12db-4515-b545-efa0f7d719c5.png" referrerpolicy="no-referrer"/></p>
<a name="JsZEu"></a>
<h1 id="ai-缓存">AI 缓存</h1>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-cache?spm=a2c4g.11186623.0.0.3cdf306bbJSWdn" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-cache?spm=a2c4g.11186623.0.0.3cdf306bbJSWdn</a></p>
<a name="TC3o5"></a>
<h2 id="应用架构-4">应用架构</h2>
<p>AI缓存插件能够缓存每个请求的响应，当有相同请求到来时，可以直接返回存储在redis中的大模型的生成内容，添加AI缓存插件后，应用架构为：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919194226-4da1f95f-af06-4a64-bf49-b8368a5fbcca.png#clientId=ud0363e53-115b-4&from=paste&height=194&id=ud308feda&originHeight=426&originWidth=2152&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=494988&status=done&style=none&taskId=u2521937d-70a1-4eb4-b6cb-3064bef0b17&title=&width=978.1817969802987" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="ldB9K"></a>
<h2 id="插件配置-4">插件配置</h2>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">redis</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">redis.static</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">6379</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">timeout</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">2000</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">username</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxx</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">password</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxx</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="redis:  serviceName: redis.static  servicePort: 6379  timeout: 2000  username: xxxxxx  password: xxxxxx"><div></div></button></div></figure></div>
<a name="NC8cT"></a>
<h2 id="插件效果-4">插件效果</h2>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1722505330751-74a95616-200d-47ee-93cd-bbff4ecedac0.png#clientId=ufc630aba-31ca-4&from=paste&height=799&id=u74a25726&originHeight=1758&originWidth=2426&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=2355853&status=done&style=none&taskId=u52a12128-39fa-4059-8626-d51dc4f25fb&title=&width=1102.7272488263034" alt="1722505213884-217a4538-36eb-4480-99de-b1a88d28466b.png" referrerpolicy="no-referrer"/></p>
<a name="s8mOy"></a>
<h1 id="ai-rag">AI RAG</h1>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-rag?spm=a2c4g.11186623.0.0.24c77267ImcfGS" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-rag?spm=a2c4g.11186623.0.0.24c77267ImcfGS</a></p>
<a name="kXWcc"></a>
<h2 id="应用架构-5">应用架构</h2>
<p>大模型具有一个显著的局限性，那就是它们的知识截止到模型被训练的数据。一旦训练完成，模型就无法获取或学习新的信息。此外，大型语言模型的训练数据虽然浩如烟海，但仍然有可能缺少某些领域的信息，或者对某些主题的覆盖不够深入，针对这些细领域的查询可能会产生不够精确或缺乏深度的结果。检索增强生成（RAG）技术能够利用检索系统从大规模的数据库中找到相关信息，然后将这些信息提供给文本生成模型以帮助生成更精确、更丰富、更符合实际情况的文本。<br/>Higress 通过对接阿里云向量检索服务能够快速实现RAG功能：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919661684-4f474521-ffbc-41d2-9b0b-5ed2601ce386.png#clientId=ud0363e53-115b-4&from=paste&height=598&id=uc5c7e8de&originHeight=1316&originWidth=1926&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=364779&status=done&style=none&taskId=uc0b67535-c6c4-4d97-ae7c-972107f886e&title=&width=875.4545264795796" alt="image.png" referrerpolicy="no-referrer"/><br/>添加RAG插件后，应用架构如下图所示：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1719919331532-3edb94b6-2c17-495d-8133-55d824fae1ef.png#clientId=ud0363e53-115b-4&from=paste&height=198&id=u5564fb6b&originHeight=436&originWidth=2382&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=529706&status=done&style=none&taskId=u13961540-2d10-4a07-92e2-be65e41d670&title=&width=1082.7272492597915" alt="image.png" referrerpolicy="no-referrer"/></p>
<a name="tHs8a"></a>
<h2 id="插件配置-5">插件配置</h2>
<p>插件需要配置dashscope和dashvector两个云服务的相关信息：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">dashscope</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">apiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">qwen</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">domain</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">dashscope.aliyuncs.com</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">dashvector</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">apiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">dashvector</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">servicePort</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">443</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">domain</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">vrs-cn-xxxxxxxxxxxxxx.dashvector.cn-hangzhou.aliyuncs.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">collection</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">xxxxxxxxxxxxxx</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="dashscope:    apiKey: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx    serviceName: qwen    servicePort: 443    domain: dashscope.aliyuncs.comdashvector:    apiKey: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx    serviceName: dashvector    servicePort: 443    domain: vrs-cn-xxxxxxxxxxxxxx.dashvector.cn-hangzhou.aliyuncs.com    collection: xxxxxxxxxxxxxx"><div></div></button></div></figure></div>
<a name="dSbM6"></a>
<h2 id="插件效果-5">插件效果</h2>
<p><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/png/90456445/1722505367871-31deb39e-2def-41e5-89ad-6d172849c645.png#clientId=ufc630aba-31ca-4&from=paste&height=799&id=u5b1be4b6&originHeight=1758&originWidth=2426&originalType=binary&ratio=2.200000047683716&rotation=0&showTitle=false&size=2218234&status=done&style=none&taskId=u312c09ec-058f-4420-979f-c5a86f7e1fc&title=&width=1102.7272488263034" alt="1719919418372-f84d6041-4aae-437c-9f53-b302b3733fd8.png" referrerpolicy="no-referrer"/></p>
<a name="CTsED"></a>
<h1 id="其他">其他</h1>
<p>除了以上插件，我们还提供了对prompt进行修改的插件以及对请求/响应进行智能转换的插件。</p>
<a name="pQch4"></a>
<h2 id="prompt工程相关插件">Prompt工程相关插件</h2>
<p>Prompt插件包括prompt模板以及prompt装饰器：</p>
<ul>
<li><a href="https://help.aliyun.com/zh/mse/user-guide/ai-cue-template?spm=a2c4g.11186623.0.0.768b184f1WdsVb" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">prompt模板</a></li>
<li><a href="https://help.aliyun.com/zh/mse/user-guide/ai-cue-decorator?spm=a2c4g.11186623.0.0.124548a79q3fyU" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">prompt装饰器</a></li>
</ul>
<p>Prompt模板允许用户在网关定义一系列LLM请求的模板，使用者通过指定模板中的参数对LLM进行访问，配置示例如下：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">templates</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">name</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;developer-chat&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">template</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">model</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">gpt-3.5-turbo</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">messages</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">role</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">system</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">content</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;你是一个 {{program}} 专家, 你平时使用的编程语言为 {{language}}&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">role</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">user</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85E89D">content</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;帮我写一个 {{program}} 程序, 你的返回结果里面应该只包含python代码&quot;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="templates:- name: &#34;developer-chat&#34;  template:    model: gpt-3.5-turbo    messages:    - role: system      content: &#34;你是一个 {{program}} 专家, 你平时使用的编程语言为 {{language}}&#34;    - role: user      content: &#34;帮我写一个 {{program}} 程序, 你的返回结果里面应该只包含python代码&#34;"><div></div></button></div></figure></div>
<p>请求body示例如下：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#79B8FF">&quot;template&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;developer-chat&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#79B8FF">&quot;properties&quot;</span><span style="--0:#E1E4E8">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#79B8FF">&quot;program&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;冒泡排序&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#79B8FF">&quot;language&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;python&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#34;template&#34;: &#34;developer-chat&#34;,  &#34;properties&#34;: {    &#34;program&#34;: &#34;冒泡排序&#34;,    &#34;language&#34;: &#34;python&#34;  }}"><div></div></button></div></figure></div>
<p>Prompt装饰器允许用户在网关定义对prompt的修改操作，包括在原始请求之前和之后插入message，配置示例如下，请求body与openai的请求一致。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">prepend</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">role</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">system</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">content</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;请使用英语回答问题.&quot;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">append</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">- </span><span style="--0:#85E89D">role</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">user</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85E89D">content</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;每次回答完问题，尝试进行反问&quot;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="prepend:- role: system  content: &#34;请使用英语回答问题.&#34;append:- role: user  content: &#34;每次回答完问题，尝试进行反问&#34;"><div></div></button></div></figure></div>
<a name="V23pX"></a>
<h2 id="ai-请求响应智能转换">AI 请求/响应智能转换</h2>
<p>官方文档：<a href="https://help.aliyun.com/zh/mse/user-guide/ai-request-response-intelligent-transformation?spm=a2c4g.11186623.0.0.4f6f63beBCZCAU" referrerpolicy="unsafe-url" rel="nofollow" target="_blank">https://help.aliyun.com/zh/mse/user-guide/ai-request-response-intelligent-transformation?spm=a2c4g.11186623.0.0.4f6f63beBCZCAU</a><br/>请求响应转换插件支持对请求/响应进行智能转换，其工作流程如下图所示（示例中后端服务为httpbin）：<br/><img src="https://intranetproxy.alipay.com/skylark/lark/0/2024/jpeg/90456445/1718352623447-cffbbf7b-5b6a-4ddb-abbe-140f3313c6ae.jpeg" alt="" referrerpolicy="no-referrer"/><br/>此插件可用于修改经过网关的请求/响应内容，例如将xml格式的响应修改为json格式。</p>
<a name="rt3VL"></a>
<h2 id="插件配置-6">插件配置</h2>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#85E89D">response</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">enable</span><span style="--0:#E1E4E8">: </span><span style="--0:#79B8FF">true</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">prompt</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;帮我修改以下HTTP应答信息，要求：1. content-type修改为application/json；2. body由xml转化为json；3. 移除content-length。&quot;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#85E89D">provider</span><span style="--0:#E1E4E8">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">serviceName</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">qwen</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">domain</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">dashscope.aliyuncs.com</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85E89D">apiKey</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">sk-xxxxxxxxxxxxxxxxxxxxxxxxxxx</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="response:    enable: true    prompt: &#34;帮我修改以下HTTP应答信息，要求：1. content-type修改为application/json；2. body由xml转化为json；3. 移除content-length。&#34;provider:    serviceName: qwen    domain: dashscope.aliyuncs.com    apiKey: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxx"><div></div></button></div></figure></div>
<a name="mvGfx"></a>
<h2 id="插件效果-6">插件效果</h2>
<p>访问原始的httpbin的<code dir="auto">/xml</code>接口，结果为：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">&lt;?</span><span style="--0:#85E89D">xml</span><span style="--0:#B392F0"> version</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&#39;1.0&#39;</span><span style="--0:#B392F0"> encoding</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&#39;us-ascii&#39;</span><span style="--0:#E1E4E8">?&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#99A0A6">&lt;!--  A SAMPLE set of slides  --&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">slideshow</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#B392F0">title</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&quot;Sample Slide Show&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#B392F0">date</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&quot;Date of publication&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#B392F0">author</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&quot;Yours Truly&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#99A0A6">&lt;!-- TITLE SLIDE --&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">slide</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">type</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&quot;all&quot;</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">&gt;Wake up to WonderWidgets!&lt;/</span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">&lt;/</span><span style="--0:#85E89D">slide</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#99A0A6">&lt;!-- OVERVIEW --&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">slide</span><span style="--0:#E1E4E8"> </span><span style="--0:#B392F0">type</span><span style="--0:#E1E4E8">=</span><span style="--0:#9ECBFF">&quot;all&quot;</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">&gt;Overview&lt;/</span><span style="--0:#85E89D">title</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">item</span><span style="--0:#E1E4E8">&gt;Why &lt;</span><span style="--0:#85E89D">em</span><span style="--0:#E1E4E8">&gt;WonderWidgets&lt;/</span><span style="--0:#85E89D">em</span><span style="--0:#E1E4E8">&gt; are great&lt;/</span><span style="--0:#85E89D">item</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">item</span><span style="--0:#E1E4E8">/&gt;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">&lt;</span><span style="--0:#85E89D">item</span><span style="--0:#E1E4E8">&gt;Who &lt;</span><span style="--0:#85E89D">em</span><span style="--0:#E1E4E8">&gt;buys&lt;/</span><span style="--0:#85E89D">em</span><span style="--0:#E1E4E8">&gt; WonderWidgets&lt;/</span><span style="--0:#85E89D">item</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">&lt;/</span><span style="--0:#85E89D">slide</span><span style="--0:#E1E4E8">&gt;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">&lt;/</span><span style="--0:#85E89D">slideshow</span><span style="--0:#E1E4E8">&gt;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?xml version='1.0' encoding='us-ascii'?><!--  A SAMPLE set of slides  --><slideshow  title=&#34;Sample Slide Show&#34;  date=&#34;Date of publication&#34;  author=&#34;Yours Truly&#34;  >  <!-- TITLE SLIDE -->  <slide type=&#34;all&#34;>    <title>Wake up to WonderWidgets!</title>  </slide>  <!-- OVERVIEW -->  <slide type=&#34;all&#34;>    <title>Overview</title>    <item>Why <em>WonderWidgets</em> are great</item>    <item/>    <item>Who <em>buys</em> WonderWidgets</item>  </slide></slideshow>"><div></div></button></div></figure></div>
<p>使用以上配置，通过网关访问httpbin的<code dir="auto">/xml</code>接口，结果为：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0" dir="ltr"><code><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#79B8FF">&quot;slideshow&quot;</span><span style="--0:#E1E4E8">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#79B8FF">&quot;title&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;Sample Slide Show&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#79B8FF">&quot;date&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;Date of publication&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#79B8FF">&quot;author&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;Yours Truly&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#79B8FF">&quot;slides&quot;</span><span style="--0:#E1E4E8">: [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">      </span></span><span style="--0:#E1E4E8">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#79B8FF">&quot;type&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;all&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#79B8FF">&quot;title&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;Wake up to WonderWidgets!&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">      </span></span><span style="--0:#E1E4E8">},</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">      </span></span><span style="--0:#E1E4E8">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#79B8FF">&quot;type&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;all&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#79B8FF">&quot;title&quot;</span><span style="--0:#E1E4E8">: </span><span style="--0:#9ECBFF">&quot;Overview&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#79B8FF">&quot;items&quot;</span><span style="--0:#E1E4E8">: [</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#9ECBFF">&quot;Why &lt;em&gt;WonderWidgets&lt;/em&gt; are great&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#9ECBFF">&quot;&quot;</span><span style="--0:#E1E4E8">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#9ECBFF">&quot;Who &lt;em&gt;buys&lt;/em&gt; WonderWidgets&quot;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">        </span></span><span style="--0:#E1E4E8">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">      </span></span><span style="--0:#E1E4E8">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">    </span></span><span style="--0:#E1E4E8">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1E4E8">  </span></span><span style="--0:#E1E4E8">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1E4E8">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#34;slideshow&#34;: {    &#34;title&#34;: &#34;Sample Slide Show&#34;,    &#34;date&#34;: &#34;Date of publication&#34;,    &#34;author&#34;: &#34;Yours Truly&#34;,    &#34;slides&#34;: [      {        &#34;type&#34;: &#34;all&#34;,        &#34;title&#34;: &#34;Wake up to WonderWidgets!&#34;      },      {        &#34;type&#34;: &#34;all&#34;,        &#34;title&#34;: &#34;Overview&#34;,        &#34;items&#34;: [          &#34;Why <em>WonderWidgets</em> are great&#34;,          &#34;&#34;,          &#34;Who <em>buys</em> WonderWidgets&#34;        ]      }    ]  }}"><div></div></button></div></figure></div>  </div> </main> </div> </span> <div class="pb-6"> <div class="pagination-links astro-u2l5gyhi"> <a href="/blog/higress-gvr7dx_awbbpb_xdxim253zzta4bun/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> 上一篇 <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Higress + Nacos 微服务网关最佳实践</span> </span> </a> <a href="/blog/higress-gvr7dx_awbbpb_tp0pgbnsg4bef0x1/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-u2l5gyhi"> 下一篇 <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">OpenAI 国内停服，除了停机迁移，这个方案更平滑</span> </span> </a> </div>  </div> </div> <div class="right-sidebar-panel fixed h-full hidden 2xl:inline-block xl:inline-block"> <div id="toggle-sidebar"> <span class="not-content"><a class="btn btn btn-secondary px-2 no-underline" id="toggle-btn"> <svg aria-hidden="true" class="right_caret text-lg align-middle rotate-180 astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </a></span> </div> <span class="toc-component-wrapper" style="--depth: 0;"> <markdown-toc data-min-h="1" data-max-h="4" class="isMobile" style="--depth: 0;"> <nav aria-labelledby="starlight__on-this-page" class="starlight__on-this-page" style="--depth: 0;"> <h2 id="starlight__on-this-page" class="heading" style="--depth: 0;"> 本页内容 </h2> <span class="table-of-contents-wrapper" style="--depth: 0;"> <ul style="--depth: 0;"> <li style="--depth: 0;"> <a href="#_top" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">概述</span> </a>  </li><li style="--depth: 0;"> <a href="#ai-代理" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">AI 代理</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#应用架构" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">应用架构</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#ai-可观测" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">AI 可观测</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#应用架构-1" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">应用架构</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置-1" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果-1" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#ai-内容安全" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">AI 内容安全</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#应用架构-2" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">应用架构</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置-2" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果-2" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#ai-token-限流" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">AI Token 限流</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#应用架构-3" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">应用架构</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置-3" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果-3" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#ai-缓存" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">AI 缓存</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#应用架构-4" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">应用架构</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置-4" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果-4" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#ai-rag" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">AI RAG</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#应用架构-5" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">应用架构</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置-5" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果-5" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li><li style="--depth: 0;"> <a href="#其他" class="py-1" style="--depth: 0;"> <span style="--depth: 0;">其他</span> </a> <span class="table-of-contents-wrapper" style="--depth: 1;"> <ul style="--depth: 1;"> <li style="--depth: 1;"> <a href="#prompt工程相关插件" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">Prompt工程相关插件</span> </a>  </li><li style="--depth: 1;"> <a href="#ai-请求响应智能转换" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">AI 请求/响应智能转换</span> </a>  </li><li style="--depth: 1;"> <a href="#插件配置-6" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件配置</span> </a>  </li><li style="--depth: 1;"> <a href="#插件效果-6" class="py-1" style="--depth: 1;"> <span style="--depth: 1;">插件效果</span> </a>  </li> </ul> </span>  </li> </ul> </span>  </nav> </markdown-toc> </span>   </div> </div>   </body> </html> </span>  